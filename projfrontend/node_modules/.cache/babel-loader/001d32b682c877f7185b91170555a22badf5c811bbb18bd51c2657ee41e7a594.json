{"ast":null,"code":"var _jsxFileName = \"/Users/adititewari/django-react-ecommerce-project/projfrontend/src/core/PaymentB.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { emptyCart } from \"./helper/CartHelper\";\nimport { getmeToken, processPayment } from \"./helper/PaymentHelper\";\nimport { createOrder } from \"./helper/OrderHelper\";\nimport { isAuthenticated, signout } from \"../auth/helper\";\nimport DropIn from \"braintree-web-drop-in-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentB = _ref => {\n  _s();\n  let {\n    products,\n    reload = undefined,\n    setReload = f => f\n  } = _ref;\n  const [info, setInfo] = useState({\n    loading: false,\n    success: false,\n    clientToken: null,\n    error: \"something went wrong\",\n    instance: {}\n  });\n  const userId = isAuthenticated && isAuthenticated().user.id;\n  const token = isAuthenticated && isAuthenticated().token;\n  const getToken = (userId, token) => {\n    getmeToken(userId, token).then(info => {\n      if (info.error) {\n        setInfo({\n          ...info,\n          error: info.error\n        });\n        signout(() => {\n          return /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 28\n          }, this);\n        });\n      } else {\n        const clientToken = info.clientToken;\n        setInfo({\n          clientToken\n        });\n      }\n    });\n  };\n  useEffect(() => {\n    getToken(userId, token);\n  }, []);\n  const getAmount = () => {\n    let amount = 0;\n    products.map(p => {\n      amount = amount + parseInt(p.price);\n    });\n    return amount;\n  };\n  const showbtnDropIn = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: info.clientToken !== null && products.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(DropIn, {\n          options: {\n            authorization: info.clientToken\n          },\n          onInstance: instance => info.instance = instance,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-block btn-success\",\n            children: \"Pay Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please login first or add something to cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Your bill is \", getAmount()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), showbtnDropIn()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentB, \"QiWkoQBsgCGMyPdT1dRmxtL7E54=\");\n_c = PaymentB;\nexport default PaymentB;\nvar _c;\n$RefreshReg$(_c, \"PaymentB\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","emptyCart","getmeToken","processPayment","createOrder","isAuthenticated","signout","DropIn","jsxDEV","_jsxDEV","PaymentB","_ref","_s","products","reload","undefined","setReload","f","info","setInfo","loading","success","clientToken","error","instance","userId","user","id","token","getToken","then","to","fileName","_jsxFileName","lineNumber","columnNumber","getAmount","amount","map","p","parseInt","price","showbtnDropIn","children","length","options","authorization","onInstance","className","_c","$RefreshReg$"],"sources":["/Users/adititewari/django-react-ecommerce-project/projfrontend/src/core/PaymentB.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { emptyCart } from \"./helper/CartHelper\";\nimport { getmeToken, processPayment } from \"./helper/PaymentHelper\";\nimport { createOrder } from \"./helper/OrderHelper\";\nimport { isAuthenticated, signout } from \"../auth/helper\";\n\nimport DropIn from \"braintree-web-drop-in-react\";\n\nconst PaymentB = ({\n    products,\n    reload = undefined,\n    setReload = f => f\n}) => {\n\n    const [info, setInfo] = useState({\n        loading: false,\n        success: false,\n        clientToken: null,\n        error: \"something went wrong\",\n        instance: {}\n\n    });\n    const userId = isAuthenticated && isAuthenticated().user.id;\n    const token = isAuthenticated && isAuthenticated().token;\n\n    const getToken = (userId, token) => {\n        getmeToken(userId, token)\n        .then((info) => {\n            if(info.error){\n                setInfo({\n                    ...info,\n                    error: info.error,\n                });\n                signout(() => {\n                    return <Navigate to=\"/\" />\n                })\n            } else {\n                const clientToken = info.clientToken;\n                setInfo({clientToken})\n            }\n        })\n    }\n\n    useEffect(() => {\n        getToken(userId, token);\n    }, []);\n\n    const getAmount = () => {\n        let amount = 0;\n        products.map((p) => {\n            amount = amount + parseInt(p.price)\n        })\n        return amount;\n    }\n\n    const showbtnDropIn = () => {\n        return (\n            <div>\n                {\n                    info.clientToken !== null && products.length > 0 ? \n                    (\n                        <div>\n                            <DropIn options={{authorization: info.clientToken}}\n                            onInstance={instance => info.instance = instance}>\n                                <button className=\"btn btn-block btn-success\">Pay Now</button>\n                            </DropIn>\n                        </div>\n                    ) :\n                    (\n                        <h3>Please login first or add something to cart</h3>\n                    )\n                }\n            </div>\n        )\n    }\n    return (\n        <div>\n            <h3>Your bill is {getAmount()}</h3>\n            {showbtnDropIn()}\n        </div>\n    )\n}\nexport default PaymentB;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}