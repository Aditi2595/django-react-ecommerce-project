{"ast":null,"code":"import { API } from \"../../backend\";\nimport { emptyCart } from \"../../core/helper/CartHelper\";\n\n//convert below function using async await later\nexport const signUp = user => {\n  return fetch(`${API}user/`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const signin = user => {\n  const formData = new FormData();\n  for (const name in user) {\n    formData.append(name, user[name]);\n  }\n  return fetch(`${API}user/login/`, {\n    method: \"POST\",\n    body: formData\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const authenticate = (data, next) => {\n  if (typeof window !== undefined) {\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\n    next();\n  }\n};\nexport const isAuthenticated = () => {\n  if (typeof window == undefined) {\n    return false;\n  }\n  if (localStorage.getItem(\"jwt\")) {\n    return JSON.parse(localStorage.getItem(\"jwt\"));\n  } else {\n    return false;\n  }\n};\nexport const signout = next => {\n  const userID = isAuthenticated() && isAuthenticated().user.id;\n  if (typeof window !== undefined) {\n    localStorage.removeItem(\"jwt\");\n    cartEmpty(() => {});\n    // next();\n    return fetch(`${API}user/logout/${userID}`, {\n      method: \"GET\"\n    }).then(response => {\n      console.log(\"Logout Success\");\n      next();\n    }).catch(err => console.log(err));\n  }\n};","map":{"version":3,"names":["API","emptyCart","signUp","user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","signin","formData","FormData","name","append","authenticate","data","next","window","undefined","localStorage","setItem","isAuthenticated","getItem","parse","signout","userID","id","removeItem","cartEmpty"],"sources":["/Users/adititewari/django-react-ecommerce-project/projfrontend/src/auth/helper/index.js"],"sourcesContent":["import {API} from \"../../backend\"\nimport {emptyCart} from \"../../core/helper/CartHelper\";\n\n//convert below function using async await later\nexport const signUp = (user) => {\n    return fetch(`${API}user/`, {\n        method:\"POST\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(user)\n    })\n    .then((response) => {\n        return response.json()\n    })\n    .catch((err) => console.log(err))\n}\n\nexport const signin = (user) => {\n    const formData = new FormData();\n    for (const name in user) {\n        formData.append(name, user[name])\n    }\n\n    return fetch(`${API}user/login/`, {\n        method: \"POST\",\n        body: formData,\n    })\n    .then((response) =>{\n        return response.json()\n    })\n    .catch((err) => console.log(err))\n\n}\n\nexport const authenticate = (data, next) => {\n    if(typeof window !== undefined) {\n        localStorage.setItem(\"jwt\", JSON.stringify(data));\n        next();\n    }\n};\n\nexport const isAuthenticated = () => {\n    if(typeof window == undefined) {\n        return false\n    }\n    if(localStorage.getItem(\"jwt\")) {\n        return JSON.parse(localStorage.getItem(\"jwt\"));\n    } else {\n        return false;\n    }\n}\n\nexport const signout = next => {\n\n    const userID = isAuthenticated() && isAuthenticated().user.id\n    if(typeof window !== undefined){\n        localStorage.removeItem(\"jwt\");\n        cartEmpty(() => {})\n       // next();\n        return fetch(`${API}user/logout/${userID}`,{\n            method: \"GET\",\n        })\n        .then((response => {\n            console.log(\"Logout Success\")\n            next();\n        }))\n        .catch((err) => console.log(err))\n    }\n\n}"],"mappings":"AAAA,SAAQA,GAAG,QAAO,eAAe;AACjC,SAAQC,SAAS,QAAO,8BAA8B;;AAEtD;AACA,OAAO,MAAMC,MAAM,GAAIC,IAAI,IAAK;EAC5B,OAAOC,KAAK,CAAE,GAAEJ,GAAI,OAAM,EAAE;IACxBK,MAAM,EAAC,MAAM;IACbC,OAAO,EAAE;MACLC,MAAM,EAAE,kBAAkB;MAC1B,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,IAAI;EAC7B,CAAC,CAAC,CACDQ,IAAI,CAAEC,QAAQ,IAAK;IAChB,OAAOA,QAAQ,CAACC,IAAI,CAAC,CAAC;EAC1B,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;AACrC,CAAC;AAED,OAAO,MAAMG,MAAM,GAAIf,IAAI,IAAK;EAC5B,MAAMgB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/B,KAAK,MAAMC,IAAI,IAAIlB,IAAI,EAAE;IACrBgB,QAAQ,CAACG,MAAM,CAACD,IAAI,EAAElB,IAAI,CAACkB,IAAI,CAAC,CAAC;EACrC;EAEA,OAAOjB,KAAK,CAAE,GAAEJ,GAAI,aAAY,EAAE;IAC9BK,MAAM,EAAE,MAAM;IACdG,IAAI,EAAEW;EACV,CAAC,CAAC,CACDR,IAAI,CAAEC,QAAQ,IAAI;IACf,OAAOA,QAAQ,CAACC,IAAI,CAAC,CAAC;EAC1B,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;AAErC,CAAC;AAED,OAAO,MAAMQ,YAAY,GAAGA,CAACC,IAAI,EAAEC,IAAI,KAAK;EACxC,IAAG,OAAOC,MAAM,KAAKC,SAAS,EAAE;IAC5BC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEpB,IAAI,CAACC,SAAS,CAACc,IAAI,CAAC,CAAC;IACjDC,IAAI,CAAC,CAAC;EACV;AACJ,CAAC;AAED,OAAO,MAAMK,eAAe,GAAGA,CAAA,KAAM;EACjC,IAAG,OAAOJ,MAAM,IAAIC,SAAS,EAAE;IAC3B,OAAO,KAAK;EAChB;EACA,IAAGC,YAAY,CAACG,OAAO,CAAC,KAAK,CAAC,EAAE;IAC5B,OAAOtB,IAAI,CAACuB,KAAK,CAACJ,YAAY,CAACG,OAAO,CAAC,KAAK,CAAC,CAAC;EAClD,CAAC,MAAM;IACH,OAAO,KAAK;EAChB;AACJ,CAAC;AAED,OAAO,MAAME,OAAO,GAAGR,IAAI,IAAI;EAE3B,MAAMS,MAAM,GAAGJ,eAAe,CAAC,CAAC,IAAIA,eAAe,CAAC,CAAC,CAAC3B,IAAI,CAACgC,EAAE;EAC7D,IAAG,OAAOT,MAAM,KAAKC,SAAS,EAAC;IAC3BC,YAAY,CAACQ,UAAU,CAAC,KAAK,CAAC;IAC9BC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IACpB;IACC,OAAOjC,KAAK,CAAE,GAAEJ,GAAI,eAAckC,MAAO,EAAC,EAAC;MACvC7B,MAAM,EAAE;IACZ,CAAC,CAAC,CACDM,IAAI,CAAEC,QAAQ,IAAI;MACfI,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7BQ,IAAI,CAAC,CAAC;IACV,CAAE,CAAC,CACFX,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACrC;AAEJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}